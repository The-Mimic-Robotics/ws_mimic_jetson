# ZED2 Camera Configuration for Nav2 Navigation
# Based on ZED ROS2 wrapper common parameters
# Optimized for indoor navigation with Jetson Orin Nano

# General Configuration
general:
  camera_name: zed2
  camera_model: zed2
  grab_resolution: HD720  # 720p for good balance of performance and quality on Jetson
  grab_frame_rate: 30     # 30 FPS
  gpu_id: -1              # Use default GPU
  
# Serial Number (leave empty to connect to first available camera)
svo_file: ""
stream: ""

# Video Configuration
depth:
  depth_mode: NEURAL  # NEURAL for speed on Jetson (ULTRA for accuracy)
  depth_stabilization: 1   # Enable depth stabilization
  min_depth: 0.3           # Minimum depth: 30cm
  max_depth: 8.0           # Maximum depth: 8m (good for indoor)
  
# Positional Tracking (THIS IS KEY FOR NAV2!)
pos_tracking:
  pos_tracking_enabled: true          # MUST BE EXPLICITLY TRUE
  publish_tf: true                    # PUBLISH odom->base_link transform
  publish_map_tf: false               # We'll handle map frame separately if needed
  map_frame: map
  odometry_frame: odom
  base_frame: base_link
  camera_frame: camera_link
  
  # Tracking quality settings
  area_memory: true                   # Enable area memory (loop closure)
  imu_fusion: true                    # Use IMU for better tracking
  floor_alignment: false              # Don't force floor alignment
  initial_world_transform: [0, 0, 0, 0, 0, 0]  # Identity transform
  path_pub_rate: 2.0                  # Publish path at 2Hz
  path_max_count: 100                 # Keep last 100 poses in path
  two_d_mode: false                   # 3D tracking (not 2D only)
  
  # For indoor navigation
  set_gravity_as_origin: true
  set_as_static: false                # Robot is moving!

# Mapping (for future SLAM if needed)
mapping:
  mapping_enabled: false               # Start with mapless navigation
  resolution: 0.05                     # 5cm resolution
  max_mapping_range: 5.0               # 5m mapping range
  fused_pointcloud_freq: 1.0

# Object Detection (disabled to save processing)
object_detection:
  od_enabled: false

# Sensors
sensors:
  sensors_image_sync: false
  sensors_pub_rate: 200.0              # IMU at 200Hz
  qos_history: 1
  qos_depth: 1
  qos_reliability: 1
  qos_durability: 2

# Advanced
advanced:
  thread_sched_policy: SCHED_FIFO     # Real-time scheduling for consistent performance

# Coordinate Frames
# ZED frame convention: X=Right, Y=Down, Z=Forward
# ROS frame convention: X=Forward, Y=Left, Z=Up
# The wrapper handles this transformation automatically
